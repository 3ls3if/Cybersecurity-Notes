# â„¹ Introduction to Identities

## Active Directory's role in security

### Components of an IAM System

* Directory
* Directory Management Tool
* Access Control
* Privilege Management
* Audit and Reporting

### Forms of Identity Subsystems

#### Linux

* &#x20;/etc/shadow
* &#x20;/etc/passwd

#### Windows

* Security Access Manager

### Identity Management

* Linux-based OpenLDAP
* Windows-based Active Directory
* Third party solutions: Shibboleth, Okta, etc.
* Logical structure in the organization
* Physical mapping across site

### Management Tools

#### Active Directory

* Remote Server Administration Tool
* Powershell

#### LDAP Service (Active Directory/Linux)

* LDAPAdmin
* Jxplorer

### Authentication

* UserID and password
* Passwords stored as hashes
* Complex passwords - failed solution
* Multifactor authentication

### Active Directory Auditing

* Collect data from the directory
* Analyze it to determine directory health
* Ensure the directory is secure
* Ensure it supports the IT mission



## The LDAP Protocol

* Lightweight Directory Access Protocol
* Repository for organizational entity information
* Uses port **389** for **LDAP** and **636** for port **LDAPS**

### LDAP System

* Distributed servers
* Coordinated response to requests

## Interact with LDAP at the command line

{% embed url="https://openldap.org" %}

```
nmap -p 389 <IP address> --script ldap-search
```

```
ldapsearch -x -b "dc=cybex,dc=nz" -H ldap://<IP address>
```

### Connect to the LDAP server using SSH

```
ssh <username>@<IP address> 
```

### Dump database contents

```
sudo slapcat 
```

### Decode the Password

```
echo -n "<encoded password>" | base64 --decode
```



## The LDAPAdmin Tool

{% embed url="https://sourceforge.net/projects/ldapadmin" %}

## Active Directory Domain Services

* Directory
* Schema
* Catalog
* Group Policy Objects
* Replication service
* Security for identity and access control

## Active Directory Hierarchy&#x20;

<figure><img src="../../.gitbook/assets/image (53).png" alt=""><figcaption></figcaption></figure>

```
dmitry yahoo.com
```

## Domain Controller View

<figure><img src="../../.gitbook/assets/image (54).png" alt=""><figcaption></figcaption></figure>

## Trust Relationships

<figure><img src="../../.gitbook/assets/image (55).png" alt=""><figcaption></figcaption></figure>

## Interact with Active Directory at the command line

```
nmap -p 389 <IP address> --script ldap.search --script-args="script.username=<domain\username>,ldap.password=<password>,qfilter=users" -Pn
```

## Access LDAP services with a GUI client

### Install Jxplorer

```
sudo apt install jxplorer
```

### Run Jxplorer GUI

```
jxplorer
```

## Active Directory Security Audit

{% embed url="https://www.lepide.com/data-security-platform/active-directory-auditing.html" %}

{% embed url="https://www.lepide.com/freetools/ad-users-with-admin-privileges.html" %}

### Run The Tool

```
cmd> lepide
```

* Enter Domain Name or IP address
* Enter the admin username
* Enter password
* Click **Scan Now** button

